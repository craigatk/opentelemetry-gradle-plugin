plugins {
    id 'java-gradle-plugin'
    id "org.jetbrains.kotlin.jvm" version "1.7.10"
    id "org.jlleitschuh.gradle.ktlint" version "10.3.0"
}

gradlePlugin {
    plugins {
        opentelemetryPlugin {
            id = 'com.atkinsondev.opentelemetry-build'
            implementationClass = 'com.atkinsondev.opentelemetry.build.OpenTelemetryBuildPlugin'
        }
    }
}

repositories {
    mavenCentral()
}

dependencies {
    implementation("io.opentelemetry:opentelemetry-api:$otelVersion")
    implementation("io.opentelemetry:opentelemetry-sdk:$otelVersion")
    implementation("io.opentelemetry:opentelemetry-exporter-otlp:$otelVersion")
    implementation("io.opentelemetry:opentelemetry-semconv:$otelVersion-alpha")

    testImplementation gradleTestKit()

    testImplementation(platform("org.junit:junit-bom:5.9.0"))
    testImplementation("org.junit.jupiter:junit-jupiter")

    testImplementation "com.github.tomakehurst:wiremock-jre8:2.33.2"

    testImplementation("io.strikt:strikt-core:0.34.0")
}

test {
    useJUnitPlatform()
}